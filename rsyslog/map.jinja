{# vi: set ft=jinja: #}
{# vi: set ft=jinja: #}
{% import_yaml "rsyslog/defaults.yaml" as defaults %}

{% set os_family_map = salt['grains.filter_by']({
    'Debian': {},
    'RedHat': {
      'workdirectory': '/var/lib/rsyslog',
    },
    'Arch': {},
  }, grain='os_family', merge=salt['pillar.get']('rsyslog:lookup')) 
%}
{% do defaults.rsyslog.update(os_family_map) %}

{% set pkg = salt['pillar.get']('rsyslog:lookup', default={}, merge=True) %}
{% do defaults.rsyslog.update(pkg) %}

{% set rsyslog = salt['pillar.get']('rsyslog', default=defaults['rsyslog'], merge=True) %}
